(this["webpackJsonpcrud-ui"]=this["webpackJsonpcrud-ui"]||[]).push([[0],{3:function(t,e,n){t.exports={table_container:"Table_table_container__3yJTE",table_btns:"Table_table_btns__3__yz",table_content:"Table_table_content__3Ph88",form_btn:"Table_form_btn__1pOS1",table_formInput:"Table_table_formInput__ZC8tS",table:"Table_table__2-8w_"}},48:function(t,e,n){},49:function(t,e,n){"use strict";n.r(e);var a=n(1),c=n(19),r=n.n(c),i=n(20),o=n(21),d=n(24),s=n(23),u=n(7),l=n(4),b=n(6),j=n(5),h=n(3),f=n.n(h),O=n(0),m=function(t){var e=Object(a.useState)(t.data),n=Object(j.a)(e,2),c=n[0],r=n[1];return Object(O.jsx)("td",{children:Object(O.jsx)("input",{className:f.a.table_input,value:c,onChange:function(t){r(t.target.value)},onBlur:function(){return t.toCollectEditRecords(t.nameValue,t.id,c,t.item)}})})},_=function(t){var e=[];for(var n in t.item.data)e.push(Object(O.jsx)(m,{nameValue:n,id:t.item._id,data:t.item.data[n],item:t.item,toCollectEditRecords:t.toCollectEditRecords}));return Object(O.jsx)("tr",{className:f.a.table_Inputs,id:t.item._id,children:e})},p=function(t){return t.Edit!=t.id?Object(O.jsx)("button",{onClick:function(){return t.setEditMode(t.id)},children:"Edit"}):Object(O.jsx)("button",{onClick:function(){t.recordsEdit.length>0?t.recordsEdit.map((function(e){t.updateRecords(e._id,e),t.setEditMode("")})):t.setEditMode("")},children:"Save"})},v=function(t){var e=Object(a.useState)(""),n=Object(j.a)(e,2),c=n[0],r=n[1],i=[];t.users.map((function(e){var n=[];for(var a in e.data)n.push(Object(O.jsx)("td",{children:e.data[a]},"".concat(e._id)+Math.floor(1e13*Math.random())));i.push(c==e._id?Object(O.jsx)(_,{item:e,toCollectEditRecords:t.toCollectEditRecords}):Object(O.jsx)("tr",{children:n},"".concat(e._id)+e.data.firstName+e.data.lastName))}));var o=[];t.users.forEach((function(e){o.push(Object(O.jsx)("button",{onClick:function(){return t.deleteRecord(e._id)},children:"Delete"}))}));var d=[];return t.users.map((function(e){d.push(Object(O.jsx)(p,{recordsEdit:t.recordsEdit,Edit:c,setEditMode:r,item:e,id:e._id,updateRecords:t.updateRecords}))})),Object(O.jsxs)("div",{className:f.a.table_content,children:[Object(O.jsxs)("div",{className:f.a.table_container,children:[Object(O.jsxs)("table",{className:f.a.table,children:[Object(O.jsx)("thead",{children:Object(O.jsxs)("tr",{children:[Object(O.jsx)("th",{children:"First Name"}),Object(O.jsx)("th",{children:"Last Name"}),Object(O.jsx)("th",{children:"Phone"}),Object(O.jsx)("th",{children:"Age"})]})}),Object(O.jsxs)("tbody",{children:[" ",i]})]}),Object(O.jsxs)("form",{onSubmit:function(e){e.preventDefault(),t.putRecords(e)},children:[Object(O.jsxs)("div",{className:f.a.table_formInput,children:[Object(O.jsx)("input",{name:"FirstName",id:"1",placeholder:"Enter first name"}),Object(O.jsx)("input",{name:"LastName",placeholder:"Enter last name"}),Object(O.jsx)("input",{name:"Phone",placeholder:"Enter your phone"}),Object(O.jsx)("input",{name:"Age",placeholder:"Enter age"})]}),Object(O.jsx)("div",{className:f.a.form_btn,children:Object(O.jsx)("button",{children:"Add Records"})})]})]}),Object(O.jsx)("div",{className:f.a.table_btns,children:o}),Object(O.jsx)("div",{className:f.a.table_btns,children:d})]})},x=n(22),g=n.n(x).a.create({baseURL:"http://178.128.196.163:3000/api/records"}),E={get:function(){return g.get("").then((function(t){return t}))},put:function(t){return g.put("",{data:t}).then((function(t){return t}))},getOne:function(t){return g.get("/".concat(t)).then((function(t){return t.data}))},delete:function(t){return g.delete("/".concat(t)).then((function(t){return t}))},update:function(t,e){return g.post("/".concat(t),Object(l.a)({},e)).then((function(t){return t}))}},N=function(){var t=Object(a.useState)([]),e=Object(j.a)(t,2),n=e[0],c=e[1],r=Object(a.useState)([]),i=Object(j.a)(r,2),o=i[0],d=i[1];Object(a.useEffect)((function(){n.length<1&&s()}));var s=function(){E.get().then((function(t){c([].concat(Object(b.a)(n),Object(b.a)(t.data)))}))};return Object(O.jsx)(v,{toCollectEditRecords:function(t,e,n,a){if(o.length>0)o.map((function(a){if(a._id==e){var c={_id:e,data:Object(l.a)(Object(l.a)({},a.data),{},Object(u.a)({},t,n))};d([].concat(Object(b.a)(o),[c]))}}));else{var c={_id:e,data:Object(l.a)(Object(l.a)({},a.data),{},Object(u.a)({},t,n))};d([].concat(Object(b.a)(o),[c]))}},deleteRecord:function(t){E.delete(t).then((function(){c(Object(b.a)(n.filter((function(e){return!e._id==t}))))}))},getRecords:s,putRecords:function(t){if(t.target.FirstName.value.trim().length>0||t.target.LastName.value.trim().length>0||t.target.Phone.value.trim().length>0||t.target.Age.value.trim().length>0){var e={firstName:"".concat(t.target.FirstName.value),lastName:"".concat(t.target.LastName.value),phone:"".concat(t.target.Phone.value),age:"".concat(t.target.Age.value)};E.put(e).then((function(e){t.target.reset();var a=e.data._id;E.getOne(a).then((function(t){return c([].concat(Object(b.a)(n),[t]))}))}))}else alert("\u041f\u043e\u043b\u044f \u0432\u0432\u043e\u0434\u0430 \u043d\u0435 \u0434\u043e\u043b\u0436\u043d\u044b \u0431\u044b\u0442\u044c \u043f\u0443\u0441\u0442\u044b")},updateRecords:function(t,e){E.update(t,e).then((function(){c(n.map((function(t,n){return t._id==e._id?Object(l.a)(Object(l.a)({},t),e):t})))})).then((function(){return d([])})).catch((function(t){return console.log(t)}))},users:n,recordsEdit:o})},R=function(t){Object(d.a)(n,t);var e=Object(s.a)(n);function n(){return Object(i.a)(this,n),e.apply(this,arguments)}return Object(o.a)(n,[{key:"render",value:function(){return Object(O.jsx)("div",{className:"App",children:Object(O.jsx)(N,{})})}}]),n}(a.Component);n(48);r.a.render(Object(O.jsx)(R,{}),document.getElementById("root"))}},[[49,1,2]]]);
//# sourceMappingURL=main.a5f3d803.chunk.js.map