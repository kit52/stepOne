(this["webpackJsonpcrud-ui"]=this["webpackJsonpcrud-ui"]||[]).push([[0],{29:function(t,e,n){},49:function(t,e,n){},5:function(t,e,n){t.exports={table:"Table_table__2-8w_",table_container:"Table_table_container__3yJTE",table_btns:"Table_table_btns__3__yz",table_content:"Table_table_content__3Ph88"}},50:function(t,e,n){"use strict";n.r(e);var c=n(1),a=n(19),r=n.n(a),o=n(20),i=n(21),s=n(24),d=n(23),u=(n(29),n(7)),l=n(3),j=n(6),b=n(4),h=n(5),f=n.n(h),O=n(0),m=function(t){console.log(t);var e=Object(c.useState)(t.data),n=Object(b.a)(e,2),a=n[0],r=n[1];return Object(O.jsx)("input",{value:a,onChange:function(t){r(t.target.value)},onBlur:function(){return t.toCollectEditRecords(t.nameValue,t.id,a,t.item)}})},p=function(t){console.log(t);var e=[];for(var n in t.item.data)e.push(Object(O.jsx)(m,{nameValue:n,id:t.item._id,data:t.item.data[n],item:t.item,toCollectEditRecords:t.toCollectEditRecords}));return Object(O.jsx)("div",{id:t.item._id,children:e})},g=function(t){return console.log(t),t.Edit!=t.id?Object(O.jsx)("button",{onClick:function(){return t.setEditMode(t.id)},children:"Edit"}):Object(O.jsx)("button",{onClick:function(){t.recordsEdit.length>0?t.recordsEdit.map((function(e){t.updateRecords(e._id,e),t.setEditMode("")})):t.setEditMode("")},children:"Save"})},v=function(t){var e=Object(c.useState)(""),n=Object(b.a)(e,2),a=n[0],r=n[1],o=[];t.users.map((function(e){var n=[];for(var c in e.data)n.push(Object(O.jsx)("td",{children:e.data[c]},"".concat(e._id)+Math.floor(1e13*Math.random())));o.push(a==e._id?Object(O.jsx)(p,{item:e,toCollectEditRecords:t.toCollectEditRecords}):Object(O.jsx)("tr",{children:n},"".concat(e._id)+e.data.firstName+e.data.lastName))}));var i=[];t.users.forEach((function(e){i.push(Object(O.jsx)("button",{onClick:function(){return t.deleteRecord(e._id)},children:"Delete"}))}));var s=[];return t.users.map((function(e){s.push(Object(O.jsx)(g,{recordsEdit:t.recordsEdit,Edit:a,setEditMode:r,item:e,id:e._id,updateRecords:t.updateRecords}))})),Object(O.jsxs)("div",{className:f.a.table,children:[Object(O.jsxs)("div",{className:f.a.table_container,children:[Object(O.jsxs)("table",{children:[Object(O.jsx)("thead",{children:Object(O.jsxs)("tr",{children:[Object(O.jsx)("th",{children:"First Name"}),Object(O.jsx)("th",{children:"Last Name"}),Object(O.jsx)("th",{children:"Phone"}),Object(O.jsx)("th",{children:"Age"})]})}),Object(O.jsxs)("tbody",{children:[" ",o]})]}),Object(O.jsxs)("form",{onSubmit:function(e){e.preventDefault(),t.putRecords(e)},children:[Object(O.jsx)("input",{name:"FirstName",id:"1",placeholder:"Enter first name"}),Object(O.jsx)("input",{name:"LastName",placeholder:"Enter last name"}),Object(O.jsx)("input",{name:"Phone",placeholder:"Enter your phone"}),Object(O.jsx)("input",{name:"Age",placeholder:"Enter age"}),Object(O.jsx)("div",{children:Object(O.jsx)("button",{children:"Add Records"})})]})]}),Object(O.jsx)("div",{className:f.a.table_btns,children:i}),Object(O.jsx)("div",{className:f.a.table_btns,children:s})]})},_=n(22),x=n.n(_).a.create({baseURL:"http://178.128.196.163:3000/api/records"}),E={get:function(){return x.get("").then((function(t){return t}))},put:function(t){return x.put("",{data:t}).then((function(t){return t}))},getOne:function(t){return x.get("/".concat(t)).then((function(t){return t.data}))},delete:function(t){return x.delete("/".concat(t)).then((function(t){return t}))},update:function(t,e){return x.post("/".concat(t),Object(l.a)({},e)).then((function(t){return t}))}},N=function(){var t=Object(c.useState)([]),e=Object(b.a)(t,2),n=e[0],a=e[1],r=Object(c.useState)([]),o=Object(b.a)(r,2),i=o[0],s=o[1];Object(c.useEffect)((function(){n.length<1&&d()}));var d=function(){E.get().then((function(t){a([].concat(Object(j.a)(n),Object(j.a)(t.data)))}))};return Object(O.jsx)("div",{className:f.a.table_content,children:Object(O.jsx)(v,{toCollectEditRecords:function(t,e,n,c){if(console.log(t),console.log(e),console.log(n),console.log(c),i.length>0)i.map((function(c){if(c._id==e){var a={_id:e,data:Object(l.a)(Object(l.a)({},c.data),{},Object(u.a)({},t,n))};s([].concat(Object(j.a)(i),[a]))}}));else{var a={_id:e,data:Object(l.a)(Object(l.a)({},c.data),{},Object(u.a)({},t,n))};s([].concat(Object(j.a)(i),[a]))}},deleteRecord:function(t){E.delete(t).then((function(){a(Object(j.a)(n.filter((function(e){return!e._id==t}))))}))},getRecords:d,putRecords:function(t){if(t.target.FirstName.value.trim().length>0||t.target.LastName.value.trim().length>0||t.target.Phone.value.trim().length>0||t.target.Age.value.trim().length>0){var e={firstName:"".concat(t.target.FirstName.value),lastName:"".concat(t.target.LastName.value),phone:"".concat(t.target.Phone.value),age:"".concat(t.target.Age.value)};E.put(e).then((function(t){var e=t.data._id;E.getOne(e).then((function(t){return a([].concat(Object(j.a)(n),[t]))}))}))}else alert("\u041f\u043e\u043b\u044f \u0432\u0432\u043e\u0434\u0430 \u043d\u0435 \u0434\u043e\u043b\u0436\u043d\u044b \u0431\u044b\u0442\u044c \u043f\u0443\u0441\u0442\u044b")},updateRecords:function(t,e){E.update(t,e).then((function(){a(n.map((function(t,n){return t._id==e._id?Object(l.a)(Object(l.a)({},t),e):t})))})).then((function(){return s([])})).catch((function(t){return console.log(t)}))},users:n,recordsEdit:i})})},R=function(t){Object(s.a)(n,t);var e=Object(d.a)(n);function n(){return Object(o.a)(this,n),e.apply(this,arguments)}return Object(i.a)(n,[{key:"render",value:function(){return Object(O.jsx)("div",{className:"App",children:Object(O.jsx)(N,{})})}}]),n}(c.Component);n(49);r.a.render(Object(O.jsx)(R,{}),document.getElementById("root")),"serviceWorker"in navigator&&window.addEventListener("load",(function(){var t="".concat("/stepOne","/service-worker.js");navigator.serviceWorker.register(t).then((function(t){t.onupdatefound=function(){var e=t.installing;e.onstatechange=function(){"installed"===e.state&&(navigator.serviceWorker.controller?console.log("New content is available; please refresh."):console.log("Content is cached for offline use."))}}})).catch((function(t){console.error("Error during service worker registration:",t)}))}))}},[[50,1,2]]]);
//# sourceMappingURL=main.939bfc87.chunk.js.map