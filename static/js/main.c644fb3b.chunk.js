(this["webpackJsonpcrud-ui"]=this["webpackJsonpcrud-ui"]||[]).push([[0],{29:function(e,t,a){},49:function(e,t,a){},5:function(e,t,a){e.exports={table:"Table_table__2-8w_",table_container:"Table_table_container__3yJTE",table_btns:"Table_table_btns__3__yz",table_content:"Table_table_content__3Ph88"}},50:function(e,t,a){"use strict";a.r(t);var n=a(1),c=a(19),r=a.n(c),i=a(20),o=a(21),s=a(24),d=a(23),l=a.p+"static/media/logo.2d27ead7.svg",u=(a(29),a(7)),j=a(3),b=a(4),h=a(6),f=a(5),m=a.n(f),O=a(0),v=function(e){var t=Object(n.useState)(e.data),a=Object(h.a)(t,2),c=a[0],r=a[1];return Object(O.jsx)("input",{value:c,onChange:function(e){r(e.target.value)},onBlur:function(){return e.toCollectEditRecords(e.name,e.id,c,e.item)}})},g=function(e){var t=[];e.users.map((function(e){var a=[];for(var n in e.data)a.push(Object(O.jsx)("td",{children:e.data[n]},"".concat(e._id)+Math.floor(1e13*Math.random())));t.push(Object(O.jsx)("tr",{children:a},"".concat(e._id)+e.data.firstName+e.data.lastName))}));var a=[];e.users.map((function(t){a.push(Object(O.jsx)("button",{onClick:function(){return e.deleteRecord(t._id)},children:"Delete"}))}));var n=[];return e.users.map((function(t){var a=[];for(var c in t.data)a.push(Object(O.jsx)(v,{name:c,id:t._id,data:t.data[c],item:t,toCollectEditRecords:e.toCollectEditRecords}));n.push(Object(O.jsx)("div",{children:a}))})),Object(O.jsxs)("div",{className:m.a.table,children:[Object(O.jsxs)("div",{className:m.a.table_container,children:[Object(O.jsxs)("table",{children:[Object(O.jsx)("thead",{children:Object(O.jsxs)("tr",{children:[Object(O.jsx)("th",{children:"First Name"}),Object(O.jsx)("th",{children:"Last Name"}),Object(O.jsx)("th",{children:"Phone"}),Object(O.jsx)("th",{children:"Age"})]})}),Object(O.jsx)("tbody",{children:e.Edit?null:t})]}),e.Edit?Object(O.jsx)("div",{children:n}):null,Object(O.jsxs)("form",{onSubmit:function(t){t.preventDefault(),e.putRecords(t)},children:[Object(O.jsx)("input",{name:"FirstName",id:"1",placeholder:"Enter first name"}),Object(O.jsx)("input",{name:"LastName",placeholder:"Enter last name"}),Object(O.jsx)("input",{name:"Phone",placeholder:"Enter your phone"}),Object(O.jsx)("input",{name:"Age",placeholder:"Enter age"}),Object(O.jsx)("div",{children:Object(O.jsx)("button",{children:"Add Records"})})]})]}),Object(O.jsx)("div",{className:m.a.table_btns,children:a})]})},p=a(22),_=a.n(p).a.create({baseURL:"http://178.128.196.163:3000/api/records",withCredentials:!0}),x={get:function(){return _.get("").then((function(e){return e}))},put:function(e){return _.put("",{data:e}).then((function(e){return e}))},getOne:function(e){return _.get("/".concat(e)).then((function(e){return e.data}))},delete:function(e){return _.delete("/".concat(e)).then((function(e){return e}))},update:function(e,t){return _.post("/".concat(e),Object(j.a)({},t)).then((function(e){return e}))}},N=function(e){var t=Object(n.useState)([]),a=Object(h.a)(t,2),c=a[0],r=a[1],i=function(){x.get().then((function(e){r([].concat(Object(b.a)(c),Object(b.a)(e.data)))}))},o=Object(n.useState)([]),s=Object(h.a)(o,2),d=s[0],l=s[1];Object(n.useEffect)((function(){c.length<1&&i()}));var f=Object(n.useState)(!1),v=Object(h.a)(f,2),p=v[0],_=v[1];return Object(O.jsxs)("div",{className:m.a.table_content,children:[p?Object(O.jsx)("button",{onClick:function(){d.length>0?d.map((function(e){var t,a;t=e._id,a=e,x.update(t,a).then((function(e){_(!1),r(c.map((function(e,t){return e._id==a._id?Object(j.a)(Object(j.a)({},e),a):e})))})).catch((function(e){return console.log(e)}))})):_(!1)},children:"Save"}):Object(O.jsx)("button",{onClick:function(){return _(!0)},children:"Edit"}),Object(O.jsx)(g,{Edit:p,toCollectEditRecords:function(e,t,a,n){if(d.length>0)d.map((function(n){if(n._id==t){var c={_id:t,data:Object(j.a)(Object(j.a)({},n.data),{},Object(u.a)({},e,a))};l([].concat(Object(b.a)(d),[c]))}}));else{var c={_id:t,data:Object(j.a)(Object(j.a)({},n.data),{},Object(u.a)({},e,a))};l([].concat(Object(b.a)(d),[c]))}},deleteRecord:function(e){x.delete(e).then((function(t){r(Object(b.a)(c.filter((function(t){return!t._id==e}))))}))},getRecords:i,putRecords:function(e){if(e.target.FirstName.value.trim().length>0||e.target.LastName.value.trim().length>0||e.target.Phone.value.trim().length>0||e.target.Age.value.trim().length>0){var t={firstName:"".concat(e.target.FirstName.value),lastName:"".concat(e.target.LastName.value),phone:"".concat(e.target.Phone.value),age:"".concat(e.target.Age.value)};x.put(t).then((function(e){var t=e.data._id;x.getOne(t).then((function(e){return r([].concat(Object(b.a)(c),[e]))}))}))}else alert("\u041f\u043e\u043b\u044f \u0432\u0432\u043e\u0434\u0430 \u043d\u0435 \u0434\u043e\u043b\u0436\u043d\u044b \u0431\u044b\u0442\u044c \u043f\u0443\u0441\u0442\u044b")},users:c})]})},E=function(e){Object(s.a)(a,e);var t=Object(d.a)(a);function a(){return Object(i.a)(this,a),t.apply(this,arguments)}return Object(o.a)(a,[{key:"render",value:function(){return Object(O.jsxs)("div",{className:"App",children:[Object(O.jsxs)("div",{className:"App-header",children:[Object(O.jsx)("img",{src:l,className:"App-logo",alt:"logo"}),Object(O.jsx)("h2",{children:"Welcome to React"})]}),Object(O.jsx)(N,{})]})}}]),a}(n.Component);a(49);var k={users:[{data:{lastName:"Snow",firstName:"Jon",age:"30"},_id:"0"},{data:{lastName:"Lannister",firstName:"Alex",age:"34"},_id:"1"},{data:{lastName:"Lannister",firstName:"Garen",age:"23"},_id:"2"},{data:{lastName:"Stark",firstName:"Vladimir",age:"36"},_id:"3"},{data:{lastName:"Targaryen",firstName:"Timo",age:"12"},_id:"4"},{data:{lastName:"Melisandre",firstName:"Gven",age:"45"},_id:"5"},{data:{lastName:"Clifford",firstName:"Vladimir",age:"43"},_id:"6"},{data:{lastName:"Frances",firstName:"Iorik",age:"64"},_id:"7"},{data:{lastName:"Roxie",firstName:"Varvik",age:"24"},_id:"8"}]},R=[];k.users.map((function(e){var t=[];for(var a in e.data)t.push(Object(O.jsx)("td",{children:e.data[a]}));R.push(Object(O.jsx)("tr",{children:t}))}));var C=k;r.a.render(Object(O.jsx)(E,{props:C}),document.getElementById("root")),"serviceWorker"in navigator&&window.addEventListener("load",(function(){var e="".concat("/stepOne","/service-worker.js");navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var t=e.installing;t.onstatechange=function(){"installed"===t.state&&(navigator.serviceWorker.controller?console.log("New content is available; please refresh."):console.log("Content is cached for offline use."))}}})).catch((function(e){console.error("Error during service worker registration:",e)}))}))}},[[50,1,2]]]);
//# sourceMappingURL=main.c644fb3b.chunk.js.map